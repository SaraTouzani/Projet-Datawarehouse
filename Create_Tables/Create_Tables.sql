USE
[LightFinanceDW]
GO
/******
Object:
Table
[dbo].[DimAccount]
******/
CREATE
TABLE
[dbo].[DimAccount](
[AccountKey]
[int]
IDENTITY(1,1)
NOT
NULL,
[ParentAccountKey]
[int]
NULL,
[AccountCodeAlternateKey]
[int]
NULL,
[ParentAccountCodeAlternateKey]
[int]
NULL,
[AccountDescription]
[nvarchar](50)
NULL,
[AccountType]
[nvarchar](50)
NULL,
[Operator]
[nvarchar](50)
NULL,
[CustomMembers]
[nvarchar](300)
NULL,
[ValueType]
[nvarchar](50)
NULL,
[CustomMemberOptions]
[nvarchar](200)
NULL,
CONSTRAINT
[PK_DimAccount]
PRIMARY
KEY
CLUSTERED
(
[AccountKey]
ASC
)WITH
(PAD_INDEX
=
OFF,
STATISTICS_NORECOMPUTE
=
OFF,
IGNORE_DUP_KEY
=
OFF,
ALLOW_ROW_LOCKS
=
ON,
ALLOW_PAGE_LOCKS
=
ON)
ON
[PRIMARY]
)
ON
[PRIMARY]
GO
ALTER
TABLE
[dbo].[DimAccount]
WITH
CHECK
ADD
CONSTRAINT
[FK_DimAccount_DimAccount]
FOREIGN
KEY([ParentAccountKey])
REFERENCES
[dbo].[DimAccount]
([AccountKey])
GO
ALTER
TABLE
[dbo].[DimAccount]
CHECK
CONSTRAINT
[FK_DimAccount_DimAccount]
GO

ALTER TABLE DimAccount 
ADD isCurrent varchar(30);
GO
/******
Object:
Table
[dbo].[DimScenario]
******/
CREATE
TABLE
[dbo].[DimScenario](
[ScenarioKey]
[int]
IDENTITY(1,1)
NOT
NULL,
[ScenarioName]
[nvarchar](50)
NULL,
CONSTRAINT
[PK_DimScenario]
PRIMARY
KEY
CLUSTERED
(
[ScenarioKey]
ASC
)WITH
(PAD_INDEX
=
OFF,
STATISTICS_NORECOMPUTE
=
OFF,
IGNORE_DUP_KEY
=
OFF,
ALLOW_ROW_LOCKS
=
ON,
ALLOW_PAGE_LOCKS
=
ON)
ON
[PRIMARY]
)
ON
[PRIMARY]
GO
/******
Object:
Table
[dbo].[DimDate]
******/
CREATE
TABLE
[dbo].[DimDate](
[DateKey]
[int]
NOT
NULL,
[FullDateAlternateKey]
[date]
NOT
NULL,
[DayNumberOfWeek]
[tinyint]
NOT
NULL,
[EnglishDayNameOfWeek]
[nvarchar](10)
NOT
NULL,
[SpanishDayNameOfWeek]
[nvarchar](10)
NOT
NULL,
[FrenchDayNameOfWeek]
[nvarchar](10)
NOT
NULL,
[DayNumberOfMonth]
[tinyint]
NOT
NULL,
[DayNumberOfYear]
[smallint]
NOT
NULL,
[WeekNumberOfYear]
[tinyint]
NOT
NULL,
[EnglishMonthName]
[nvarchar](10)
NOT
NULL,
[SpanishMonthName]
[nvarchar](10)
NOT
NULL,
[FrenchMonthName]
[nvarchar](10)
NOT
NULL,
[MonthNumberOfYear]
[tinyint]
NOT
NULL,
[CalendarQuarter]
[tinyint]
NOT
NULL,
[CalendarYear]
[smallint]
NOT
NULL,
[CalendarSemester]
[tinyint]
NOT
NULL,
[FiscalQuarter]
[tinyint]
NOT
NULL,
[FiscalYear]
[smallint]
NOT
NULL,
[FiscalSemester]
[tinyint]
NOT
NULL,
CONSTRAINT
[PK_DimDate_DateKey]
PRIMARY
KEY
CLUSTERED
(
[DateKey]
ASC
)WITH
(PAD_INDEX
=
OFF,
STATISTICS_NORECOMPUTE
=
OFF,
IGNORE_DUP_KEY
=
OFF,
ALLOW_ROW_LOCKS
=
ON,
ALLOW_PAGE_LOCKS
=
ON)
ON
[PRIMARY],
CONSTRAINT
[AK_DimDate_FullDateAlternateKey]
UNIQUE
NONCLUSTERED
(
[FullDateAlternateKey]
ASC
)WITH
(PAD_INDEX
=
OFF,
STATISTICS_NORECOMPUTE
=
OFF,
IGNORE_DUP_KEY
=
OFF,
ALLOW_ROW_LOCKS
=
ON,
ALLOW_PAGE_LOCKS
=
ON)
ON
[PRIMARY]
)
ON
[PRIMARY]
GO
/******
Object:
Table
[dbo].[DimCurrency]
******/
CREATE
TABLE
[dbo].[DimCurrency](
[CurrencyKey]
[int]
IDENTITY(1,1)
NOT
NULL,
[CurrencyAlternateKey]
[nchar](3)
NOT
NULL,
[CurrencyName]
[nvarchar](50)
NOT
NULL,
CONSTRAINT
[PK_DimCurrency_CurrencyKey]
PRIMARY
KEY
CLUSTERED
(
[CurrencyKey]
ASC
)WITH
(PAD_INDEX
=
OFF,
STATISTICS_NORECOMPUTE
=
OFF,
IGNORE_DUP_KEY
=
OFF,
ALLOW_ROW_LOCKS
=
ON,
ALLOW_PAGE_LOCKS
=
ON)
ON
[PRIMARY],
CONSTRAINT
[AK_DimCurrency_CurrencyAlternateKey]
UNIQUE
NONCLUSTERED
(
[CurrencyAlternateKey]
ASC
)WITH
(PAD_INDEX
=
OFF,
STATISTICS_NORECOMPUTE
=
OFF,
IGNORE_DUP_KEY
=
OFF,
ALLOW_ROW_LOCKS
=
ON,
ALLOW_PAGE_LOCKS
=
ON)
ON
[PRIMARY]
)
ON
[PRIMARY]
GO
/******
Object:
Table
[dbo].[DimOrganization]
******/
CREATE
TABLE
[dbo].[DimOrganization](
[OrganizationKey]
[int]
IDENTITY(1,1)
NOT
NULL,
[ParentOrganizationKey]
[int]
NULL,
[PercentageOfOwnership]
[nvarchar](16)
NULL,
[OrganizationName]
[nvarchar](50)
NULL,
[CurrencyKey]
[int]
NULL,
CONSTRAINT
[PK_DimOrganization]
PRIMARY
KEY
CLUSTERED
(
[OrganizationKey]
ASC
)WITH
(PAD_INDEX
=
OFF,
STATISTICS_NORECOMPUTE
=
OFF,
IGNORE_DUP_KEY
=
OFF,
ALLOW_ROW_LOCKS
=
ON,
ALLOW_PAGE_LOCKS
=
ON)
ON
[PRIMARY]
)
ON
[PRIMARY]
GO
ALTER
TABLE
[dbo].[DimOrganization]
WITH
CHECK
ADD
CONSTRAINT
[FK_DimOrganization_DimCurrency]
FOREIGN
KEY([CurrencyKey])
REFERENCES
[dbo].[DimCurrency]
([CurrencyKey])
GO
ALTER
TABLE
[dbo].[DimOrganization]
CHECK
CONSTRAINT
[FK_DimOrganization_DimCurrency]
GO
ALTER
TABLE
[dbo].[DimOrganization]
WITH
CHECK
ADD
CONSTRAINT
[FK_DimOrganization_DimOrganization]
FOREIGN
KEY([ParentOrganizationKey])
REFERENCES
[dbo].[DimOrganization]
([OrganizationKey])
GO
ALTER
TABLE
[dbo].[DimOrganization]
CHECK
CONSTRAINT
[FK_DimOrganization_DimOrganization]
GO
/******
Object:
Table
[dbo].[DimDepartmentGroup]
******/
CREATE
TABLE
[dbo].[DimDepartmentGroup](
[DepartmentGroupKey]
[int]
IDENTITY(1,1)
NOT
NULL,
[ParentDepartmentGroupKey]
[int]
NULL,
[DepartmentGroupName]
[nvarchar](50)
NULL,
CONSTRAINT
[PK_DimDepartmentGroup]
PRIMARY
KEY
CLUSTERED
(
[DepartmentGroupKey]
ASC
)WITH
(PAD_INDEX
=
OFF,
STATISTICS_NORECOMPUTE
=
OFF,
IGNORE_DUP_KEY
=
OFF,
ALLOW_ROW_LOCKS
=
ON,
ALLOW_PAGE_LOCKS
=
ON)
ON
[PRIMARY]
)
ON
[PRIMARY]
GO
ALTER
TABLE
[dbo].[DimDepartmentGroup]
WITH
CHECK
ADD
CONSTRAINT
[FK_DimDepartmentGroup_DimDepartmentGroup]
FOREIGN
KEY([ParentDepartmentGroupKey])
REFERENCES
[dbo].[DimDepartmentGroup]
([DepartmentGroupKey])
GO
ALTER
TABLE
[dbo].[DimDepartmentGroup]
CHECK
CONSTRAINT
[FK_DimDepartmentGroup_DimDepartmentGroup]
GO
/******
Object:
Table
[dbo].[FactFinance]
******/
CREATE
TABLE
[dbo].[FactFinance](
[FinanceKey]
[int]
IDENTITY(1,1)
NOT
NULL,
[DateKey]
[int]
NOT
NULL,
[OrganizationKey]
[int]
NOT
NULL,
[DepartmentGroupKey]
[int]
NOT
NULL,
[ScenarioKey]
[int]
NOT
NULL,
[AccountKey]
[int]
NOT
NULL,
[Amount]
[float]
NOT
NULL,
[Date]
[datetime]
NULL
)
ON
[PRIMARY]
GO
ALTER
TABLE
[dbo].[FactFinance]
WITH
CHECK
ADD
CONSTRAINT
[FK_FactFinance_DimAccount]
FOREIGN
KEY([AccountKey])
REFERENCES
[dbo].[DimAccount]
([AccountKey])
GO
ALTER
TABLE
[dbo].[FactFinance]
CHECK
CONSTRAINT
[FK_FactFinance_DimAccount]
GO
ALTER
TABLE
[dbo].[FactFinance]
WITH
CHECK
ADD
CONSTRAINT
[FK_FactFinance_DimDate]
FOREIGN
KEY([DateKey])
REFERENCES
[dbo].[DimDate]
([DateKey])
GO
ALTER
TABLE
[dbo].[FactFinance]
CHECK
CONSTRAINT
[FK_FactFinance_DimDate]
GO
ALTER
TABLE
[dbo].[FactFinance]
WITH
CHECK
ADD
CONSTRAINT
[FK_FactFinance_DimDepartmentGroup]
FOREIGN
KEY([DepartmentGroupKey])
REFERENCES
[dbo].[DimDepartmentGroup]
([DepartmentGroupKey])
GO
ALTER
TABLE
[dbo].[FactFinance]
CHECK
CONSTRAINT
[FK_FactFinance_DimDepartmentGroup]
GO
ALTER
TABLE
[dbo].[FactFinance]
WITH
CHECK
ADD
CONSTRAINT
[FK_FactFinance_DimOrganization]
FOREIGN
KEY([OrganizationKey])
REFERENCES
[dbo].[DimOrganization]
([OrganizationKey])
GO
ALTER
TABLE
[dbo].[FactFinance]
CHECK
CONSTRAINT
[FK_FactFinance_DimOrganization]
GO
ALTER
TABLE
[dbo].[FactFinance]
WITH
CHECK
ADD
CONSTRAINT
[FK_FactFinance_DimScenario]
FOREIGN
KEY([ScenarioKey])
REFERENCES
[dbo].[DimScenario]
([ScenarioKey])
GO
ALTER
TABLE
[dbo].[FactFinance]
CHECK
CONSTRAINT
[FK_FactFinance_DimScenario]
GO